{"remainingRequest":"/Users/abadboy/Documents/works/yitaibox_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/abadboy/Documents/works/yitaibox_web/src/components/video.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/abadboy/Documents/works/yitaibox_web/src/components/video.vue","mtime":1627026042239},{"path":"/Users/abadboy/Documents/works/yitaibox_web/node_modules/babel-loader/lib/index.js","mtime":1609932570543},{"path":"/Users/abadboy/Documents/works/yitaibox_web/node_modules/cache-loader/dist/cjs.js","mtime":1622543821598},{"path":"/Users/abadboy/Documents/works/yitaibox_web/node_modules/vue-loader/lib/index.js","mtime":1627026069863}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAic2hvd1ZpZGVvIiwKICBwcm9wczogewogICAgdmlkZW9Vcmw6IFN0cmluZywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwbGF5ZXI6IG51bGwsCiAgICAgIHBsYXlUaW1lOiAiIiwKICAgICAgc2Vla1RpbWU6ICIiLAogICAgICBjdXJyZW50OiAiIiwKICAgICAgaXNTaG93UGxheTp0cnVlCiAgICB9OwogIH0sCiAgYmVmb3JlUm91dGVMZWF2ZSgpIHsKICAgIC8vCiAgfSwKICBjb21wdXRlZDogewogICAgdmlkZW9PcHRpb25zKCkgewogICAgICByZXR1cm4gewogICAgICAgIGNvbnRyb2xzOiB0cnVlLAogICAgICAgIHNyYzogdGhpcy52aWRlb1VybCwKICAgICAgfTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0VmlkZW8oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRWaWRlbygpIHsKICAgICAgLy/ljp/nlJ/liJ3lp4vljJbop4bpopHmlrnms5UKICAgICAgbGV0IG15VmlkZW8gPSB0aGlzLiRyZWZzLnZpZGVvOwogICAgICAvLyBteVZpZGVvLnBsYXkoKTsKICAgICAgY29uc29sZS5sb2cobXlWaWRlbyk7CiAgICAgIC8vb250aW1ldXBkYXRlCiAgICAgIG15VmlkZW8ub250aW1ldXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIG15RnVuY3Rpb24oKTsKICAgICAgfTsKICAgICAgbGV0IF90aGlzID0gdGhpczsKCiAgICAgIGZ1bmN0aW9uIG15RnVuY3Rpb24oKSB7CiAgICAgICAgbGV0IHBsYXlUaW1lID0gbXlWaWRlby5jdXJyZW50VGltZTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJjYWNoZVRpbWUiLCBwbGF5VGltZSk7CiAgICAgICAgfSwgNTAwKTsKICAgICAgICBsZXQgdGltZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjYWNoZVRpbWUiKTsKICAgICAgICAvLyDlvZPliY3mkq3mlL7kvY3nva7lj5HnlJ/lj5jljJbml7bop6blj5HjgIIKICAgICAgICBpZiAocGxheVRpbWUgLSBOdW1iZXIodGltZSkgPiAyKSB7CiAgICAgICAgICBteVZpZGVvLmN1cnJlbnRUaW1lID0gTnVtYmVyKHRpbWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIOaSreaUvuWbnuiwgwogICAgb25QbGF5ZXJQbGF5KHBsYXllcikgewogICAgICAvLyB0aGlzLmdsb2JhbFNldHRpbmcgPSB0cnVlCiAgICAgIGNvbnNvbGUubG9nKCJwbGF5ZXIgcGxheSEiLCBwbGF5ZXIpOwogICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ2anMtY29udHJvbC1iYXIiKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidmpzLWNvbnRyb2wtYmFyIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICB9LAoKICAgIC8vIOaaguWBnOWbnuiwgwogICAgb25QbGF5ZXJQYXVzZShwbGF5ZXIpIHsKICAgICAgLy8gdGhpcy5nbG9iYWxTZXR0aW5nLmNvbnRyb2xzID0gZmFsc2U7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJwbGF5ZXIgcGF1c2UhIiwgcGxheWVyKTsKICAgICAgLy8gdmFyIHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZpZGVvIik7CiAgICAgIC8vIHZpZGVvLmNvbnRyb2xzPWZhbHNlOwogICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ2anMtY29udHJvbC1iYXIiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgfSwKICAgIHNlZWtpbmcoKSB7CiAgICAgIGNvbnNvbGUubG9nKCLlv6vov5siKTsKICAgIH0sCiAgfSwKCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGlmICh0aGlzLnBsYXllcikgewogICAgICB0aGlzLnBsYXllci5kaXNwb3NlKCk7CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["video.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"video.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"_pc_video\">\n    <!-- \n       webkit-playsinline  小窗\n       preload: （预加载）iPhone支持，Android不一定支持;\n　   poster: （封面图片）iPhone支持，Android不一定支持;\n　　autoplay: （自动播放）iPhone中的Safari不支持，webview可能被开启。Android不一定支持；\n　　loop: （循环播放）iPhone支持，Android不一定支持;\n　　controls: （控制条）iPhone支持，大师需要开始播放了才显示，Android基本支持;\n　　width: （宽度）;\n　　height: （高度）;\n\nx-webkit-airplay=\"allow\"  视频支持ios的AirPlay功能\n     -->\n    <video\n      :src=\"videoUrl\"\n      :controls=\"videoOptions.controls\"\n      class=\"video-js vjs-big-play-centered vjs-fluid\"\n      webkit-playsinline=\"true\"\n      playsinline=\"true\"\n      x-webkit-airplay=\"allow\"\n      x5-playsinline\n      style=\"width: 100%\"\n      @play=\"onPlayerPlay\"\n      @pause=\"onPlayerPause\"\n      @seeking=\"seeking\"\n      loop=\"loop\" \n      ref=\"video\"\n    ></video>\n    <div class=\"_pc_icon_play\" v-if=\"isShowPlay\" @click=\"$refs.video.play();isShowPlay=false\">\n      <img :src=\"$cdn+'/pc/content1_left_play.png'\" alt=\"\" srcset=\"\" />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"showVideo\",\n  props: {\n    videoUrl: String,\n  },\n  data() {\n    return {\n      player: null,\n      playTime: \"\",\n      seekTime: \"\",\n      current: \"\",\n      isShowPlay:true\n    };\n  },\n  beforeRouteLeave() {\n    //\n  },\n  computed: {\n    videoOptions() {\n      return {\n        controls: true,\n        src: this.videoUrl,\n      };\n    },\n  },\n  mounted() {\n    this.initVideo();\n  },\n  methods: {\n    initVideo() {\n      //原生初始化视频方法\n      let myVideo = this.$refs.video;\n      // myVideo.play();\n      console.log(myVideo);\n      //ontimeupdate\n      myVideo.ontimeupdate = function () {\n        myFunction();\n      };\n      let _this = this;\n\n      function myFunction() {\n        let playTime = myVideo.currentTime;\n        setTimeout(function () {\n          localStorage.setItem(\"cacheTime\", playTime);\n        }, 500);\n        let time = localStorage.getItem(\"cacheTime\");\n        // 当前播放位置发生变化时触发。\n        if (playTime - Number(time) > 2) {\n          myVideo.currentTime = Number(time);\n        } else {\n        }\n      }\n    },\n\n    // 播放回调\n    onPlayerPlay(player) {\n      // this.globalSetting = true\n      console.log(\"player play!\", player);\n      // document.getElementsByClassName(\"vjs-control-bar\").style.display = \"block\";\n      // document.getElementsByClassName(\"vjs-control-bar\").style.display = \"block\";\n    },\n\n    // 暂停回调\n    onPlayerPause(player) {\n      // this.globalSetting.controls = false;\n      // console.log(\"player pause!\", player);\n      // var video = document.getElementById(\"video\");\n      // video.controls=false;\n      // document.getElementsByClassName(\"vjs-control-bar\").style.display = \"none\";\n    },\n    seeking() {\n      console.log(\"快进\");\n    },\n  },\n\n  beforeDestroy() {\n    if (this.player) {\n      this.player.dispose();\n    }\n  },\n};\n</script>\n\n\n<style>\n._pc_video {\n  position: relative;\n}\n._pc_icon_play {\n  width: 84px;\n  height: 84px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  position: absolute;\n  top: calc((100% - 84px) / 2);\n  left: calc((100% - 84px) / 2);\n}\n._pc_icon_play img {\n  width: 84px;\n  height: 84px;\n}\n</style>"]}]}
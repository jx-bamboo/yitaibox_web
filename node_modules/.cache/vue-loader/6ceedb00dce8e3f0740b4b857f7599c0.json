{"remainingRequest":"/Users/abadboy/Documents/works/yitaibox_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/abadboy/Documents/works/yitaibox_web/src/components/video.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/abadboy/Documents/works/yitaibox_web/src/components/video.vue","mtime":1627026042239},{"path":"/Users/abadboy/Documents/works/yitaibox_web/node_modules/css-loader/dist/cjs.js","mtime":1601969114939},{"path":"/Users/abadboy/Documents/works/yitaibox_web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1627026069863},{"path":"/Users/abadboy/Documents/works/yitaibox_web/node_modules/postcss-loader/src/index.js","mtime":1601969126371},{"path":"/Users/abadboy/Documents/works/yitaibox_web/node_modules/cache-loader/dist/cjs.js","mtime":1622543821598},{"path":"/Users/abadboy/Documents/works/yitaibox_web/node_modules/vue-loader/lib/index.js","mtime":1627026069863}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5fcGNfdmlkZW8gewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQouX3BjX2ljb25fcGxheSB7CiAgd2lkdGg6IDg0cHg7CiAgaGVpZ2h0OiA4NHB4OwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBjdXJzb3I6IHBvaW50ZXI7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogY2FsYygoMTAwJSAtIDg0cHgpIC8gMik7CiAgbGVmdDogY2FsYygoMTAwJSAtIDg0cHgpIC8gMik7Cn0KLl9wY19pY29uX3BsYXkgaW1nIHsKICB3aWR0aDogODRweDsKICBoZWlnaHQ6IDg0cHg7Cn0K"},{"version":3,"sources":["video.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"video.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"_pc_video\">\n    <!-- \n       webkit-playsinline  小窗\n       preload: （预加载）iPhone支持，Android不一定支持;\n　   poster: （封面图片）iPhone支持，Android不一定支持;\n　　autoplay: （自动播放）iPhone中的Safari不支持，webview可能被开启。Android不一定支持；\n　　loop: （循环播放）iPhone支持，Android不一定支持;\n　　controls: （控制条）iPhone支持，大师需要开始播放了才显示，Android基本支持;\n　　width: （宽度）;\n　　height: （高度）;\n\nx-webkit-airplay=\"allow\"  视频支持ios的AirPlay功能\n     -->\n    <video\n      :src=\"videoUrl\"\n      :controls=\"videoOptions.controls\"\n      class=\"video-js vjs-big-play-centered vjs-fluid\"\n      webkit-playsinline=\"true\"\n      playsinline=\"true\"\n      x-webkit-airplay=\"allow\"\n      x5-playsinline\n      style=\"width: 100%\"\n      @play=\"onPlayerPlay\"\n      @pause=\"onPlayerPause\"\n      @seeking=\"seeking\"\n      loop=\"loop\" \n      ref=\"video\"\n    ></video>\n    <div class=\"_pc_icon_play\" v-if=\"isShowPlay\" @click=\"$refs.video.play();isShowPlay=false\">\n      <img :src=\"$cdn+'/pc/content1_left_play.png'\" alt=\"\" srcset=\"\" />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"showVideo\",\n  props: {\n    videoUrl: String,\n  },\n  data() {\n    return {\n      player: null,\n      playTime: \"\",\n      seekTime: \"\",\n      current: \"\",\n      isShowPlay:true\n    };\n  },\n  beforeRouteLeave() {\n    //\n  },\n  computed: {\n    videoOptions() {\n      return {\n        controls: true,\n        src: this.videoUrl,\n      };\n    },\n  },\n  mounted() {\n    this.initVideo();\n  },\n  methods: {\n    initVideo() {\n      //原生初始化视频方法\n      let myVideo = this.$refs.video;\n      // myVideo.play();\n      console.log(myVideo);\n      //ontimeupdate\n      myVideo.ontimeupdate = function () {\n        myFunction();\n      };\n      let _this = this;\n\n      function myFunction() {\n        let playTime = myVideo.currentTime;\n        setTimeout(function () {\n          localStorage.setItem(\"cacheTime\", playTime);\n        }, 500);\n        let time = localStorage.getItem(\"cacheTime\");\n        // 当前播放位置发生变化时触发。\n        if (playTime - Number(time) > 2) {\n          myVideo.currentTime = Number(time);\n        } else {\n        }\n      }\n    },\n\n    // 播放回调\n    onPlayerPlay(player) {\n      // this.globalSetting = true\n      console.log(\"player play!\", player);\n      // document.getElementsByClassName(\"vjs-control-bar\").style.display = \"block\";\n      // document.getElementsByClassName(\"vjs-control-bar\").style.display = \"block\";\n    },\n\n    // 暂停回调\n    onPlayerPause(player) {\n      // this.globalSetting.controls = false;\n      // console.log(\"player pause!\", player);\n      // var video = document.getElementById(\"video\");\n      // video.controls=false;\n      // document.getElementsByClassName(\"vjs-control-bar\").style.display = \"none\";\n    },\n    seeking() {\n      console.log(\"快进\");\n    },\n  },\n\n  beforeDestroy() {\n    if (this.player) {\n      this.player.dispose();\n    }\n  },\n};\n</script>\n\n\n<style>\n._pc_video {\n  position: relative;\n}\n._pc_icon_play {\n  width: 84px;\n  height: 84px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  position: absolute;\n  top: calc((100% - 84px) / 2);\n  left: calc((100% - 84px) / 2);\n}\n._pc_icon_play img {\n  width: 84px;\n  height: 84px;\n}\n</style>"]}]}